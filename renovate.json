{
  "customManagers": [
    {
      "customType": "regex",
      "datasourceTemplate": "helm",
      "managerFilePatterns": ["**/nix/charts/*/default.nix"],
      "matchStrings": [
        "repo\\s*=\\s*\"(?<registryUrl>[^\"]+)\";[\\s\\S]*?chart\\s*=\\s*\"(?<depName>[^\"]+)\";[\\s\\S]*?version\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ]
    },
    {
      "customType": "regex",
      "datasourceTemplate": "docker",
      "managerFilePatterns": ["**/nix/+(modules|templates)/**/*.nix"],
      "matchStrings": [
        "image\\s*=\\s*\"(?<depName>[^\"]+)\";[\\s\\S]*?version\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ]
    }
  ],
  "packageRules": [
    {
      "matchManagers": ["regex"],
      "matchDatasources": ["helm"],
      "postUpgradeTasks": {
        "commands": [
          "nix run .#update-hash {{{packageFile}}}",
          "nix run .#generate-manifests"
        ],
        "executionMode": "update"
      }
    },
    {
      "matchManagers": ["regex"],
      "matchDatasources": ["docker"],
      "postUpgradeTasks": {
        "commands": [
          "nix run .#generate-manifests"
        ],
        "executionMode": "update"
      }
    }
  ],
  "prHourlyLimit": 16
}
