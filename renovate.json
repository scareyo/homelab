{
  "customManagers": [
    {
      "customType": "regex",
      "datasourceTemplate": "helm",
      "managerFilePatterns": ["**/nix/charts/*/default.nix"],
      "matchStrings": [
        "repo\\s*=\\s*\"https://(?<registry>[^\"]+)\";[\\s\\S]*?chart\\s*=\\s*\"(?<depName>[^\"]+)\";[\\s\\S]*?version\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "registryUrlTemplate": "https://{{registry}}"
    },
    {
      "customType": "regex",
      "datasourceTemplate": "docker",
      "managerFilePatterns": ["**/nix/charts/*/default.nix"],
      "matchStrings": [
        "repo\\s*=\\s*\"oci://(?<registry>[^\"]+)\";[\\s\\S]*?chart\\s*=\\s*\"(?<name>[^\"]+)\";[\\s\\S]*?version\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "packageNameTemplate": "{{registry}}/{{name}}"
    },
    {
      "customType": "regex",
      "datasourceTemplate": "docker",
      "managerFilePatterns": ["**/nix/+(modules|templates)/**/*.nix"],
      "matchStrings": [
        "image\\s*=\\s*\"(?<depName>[^\"]+)\";[\\s\\S]*?version\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ]
    }
  ],
  "packageRules": [
    {
      "matchManagers": ["regex"],
      "matchFileNames": ["**/nix/charts/*/default.nix"],
      "postUpgradeTasks": {
        "commands": [
          "nix run github:scareyo/homelab#update-hash {{{packageFile}}}",
          "nix run github:scareyo/homelab#generate-manifests"
        ],
        "executionMode": "update"
      }
    },
    {
      "matchManagers": ["regex"],
      "matchFileNames": ["**/nix/+(modules|templates)/**/*.nix"],
      "matchDatasources": ["docker"],
      "postUpgradeTasks": {
        "commands": [
          "nix run github:scareyo/homelab#generate-manifests"
        ],
        "executionMode": "update"
      }
    }
  ],
  "prHourlyLimit": 16
}
