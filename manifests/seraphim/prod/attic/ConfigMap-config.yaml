apiVersion: v1
data:
  server.toml: |
    # Socket address to listen on
    listen = "[::]:8080"

    allowed-hosts = ["cache.vegapunk.cloud"]
    api-endpoint = "https://cache.vegapunk.cloud/"

    [database]

    [storage]
    type = "s3"

    region = ""
    bucket = "attic"
    endpoint = "http://rook-ceph-rgw-ceph-objectstore.rook-ceph.svc"

    [chunking]
    nar-size-threshold = 65536 # chunk files that are 64 KiB or larger
    min-size = 16384            # 16 KiB
    avg-size = 65536            # 64 KiB
    max-size = 262144           # 256 KiB

    [compression]
    type = "zstd"

    [garbage-collection]
    interval = "12 hours"
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: main
    app.kubernetes.io/instance: attic
    app.kubernetes.io/name: attic
    app.kubernetes.io/part-of: attic
    app.kubernetes.io/version: 9736e87439be1b5d40cad1dff004e1d845f8b9e7
  name: config
  namespace: attic
