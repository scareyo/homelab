apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: oidc
  namespace: seedsync
spec:
  data:
    - remoteRef:
        conversionStrategy: Default
        decodingStrategy: None
        key: /seedsync/OIDC_CLIENT_ID
        metadataPolicy: None
      secretKey: client-id
    - remoteRef:
        conversionStrategy: Default
        decodingStrategy: None
        key: /seedsync/OIDC_CLIENT_SECRET
        metadataPolicy: None
      secretKey: client-secret
  dataFrom:
    - rewrite:
        - regexp:
            source: password
            target: cookie-secret
      sourceRef:
        generatorRef:
          apiVersion: generators.external-secrets.io/v1alpha1
          kind: Password
          name: cookie-secret
  secretStoreRef:
    kind: ClusterSecretStore
    name: infisical
  target: {}
